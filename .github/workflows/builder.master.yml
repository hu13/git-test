
name: Upload artifact to master
on:
  # Trigger the workflow on push or pull request,
  # but only for the master branch
  push:
    branches:
      - master


jobs:

  build:

    name: Upload merged commit artifacts
    runs-on: ubuntu-latest

    steps:

    - uses: actions/checkout@v2-beta
      with:
        ref: ${{ github.event.pull_request.head.sha }}

    - name:
      run: |
        [[ "${{ github.event_name }}" == "pull_request" ]] && HEAD_COMMIT=${{ github.event.pull_request.head.sha }}
        [[ "${{ github.event_name }}" == "push" ]] && HEAD_COMMIT=${{ github.sha }}
        echo "::set-env name=HEAD_COMMIT::$HEAD_COMMIT"
        echo "hi"
        ls -lah .
        git rev-parse --verify HEAD

    - name: asdfasdfsadf
      run: |
        echo "adsfasdfasdf"
        echo ${{ env.HEAD_COMMIT }}
        $(shell uname -s)

